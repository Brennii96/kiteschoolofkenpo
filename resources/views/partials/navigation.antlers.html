<nav class="bg-dark-brand text-white" x-data="{ mobileOpen: false }">
    <div class="container mx-auto px-4 flex items-center justify-between md:justify-center gap-6">
        <div class="flex items-center">
            <a href="/" class="flex items-center py-2 px-2 text-white">
                {{ svg :src="brand:logo" title="{{ site:name }}" height="110" width="110" class="cursor-pointer" }}
            </a>
        </div>

        <!-- Desktop Navigation -->
        <div class="hidden md:flex flex-grow justify-center space-x-12">
            {{ nav:main }}
                {{ if children }}
                    <div class="relative" x-data="{ open: false }">
                        <button @click="open = !open" @click.away="open = false"
                                class="uppercase p-2 flex items-center gap-2 text-sm lg:text-base font-medium text-white hover:text-red-brand">
                            {{ title }}
                            <svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                 viewBox="0 0 24 24">
                                <title>chevron-down</title>
                                <g fill="none">
                                    <path d="M19.5 8.25l-7.5 7.5-7.5-7.5" stroke="currentColor" stroke-width="1.5"
                                          stroke-linecap="round" stroke-linejoin="round"></path>
                                </g>
                            </svg>
                        </button>
                        <div x-show="open"
                             class="absolute bg-dark-brand text-white rounded-md mt-2 w-48 z-50 shadow-lg border border-gray-600"
                             x-transition.origin.top.left>
                            {{ children }}
                            <a href="{{ url }}" class="uppercase block px-4 py-2 hover:bg-gray-800">{{ title }}</a>
                            {{ /children }}
                        </div>
                    </div>
                {{ else }}
                    <a href="{{ url }}"
                       class="uppercase p-2 text-sm lg:text-base font-medium text-white hover:text-red-brand">{{ title }}</a>
                {{ /if }}
            {{ /nav:main }}
        </div>

        <div class="hidden md:flex items-center">
            <a href="/account" class="py-2 px-4 bg-red-brand text-white hover:bg-red-brand-dark">
                Account
            </a>
        </div>

        <!-- Mobile Menu Button -->
        <div class="md:hidden flex items-center">
            <button @click="mobileOpen = !mobileOpen" class="mobile-menu-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <title>bars-3-bottom-left</title>
                    <g fill="none">
                        <path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" stroke="currentColor" stroke-width="1.5"
                              stroke-linecap="round" stroke-linejoin="round"></path>
                    </g>
                </svg>
            </button>
        </div>
    </div>

    <!-- Mobile Navigation -->
    <div x-show="mobileOpen" class="md:hidden flex flex-col items-center pb-3 bg-dark-brand w-full"
         x-transition.origin.top.left>
        {{ nav:main_mobile }}
            {{ if children }}
                <div class="relative w-full text-center" x-data="{ open: false }">
                    <button @click="open = !open"
                            class="uppercase py-2 px-3 hover:text-red-brand w-full flex justify-center items-center gap-2">
                        {{ title }}
                        <svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                             viewBox="0 0 24 24">
                            <title>chevron-down</title>
                            <g fill="none">
                                <path d="M19.5 8.25l-7.5 7.5-7.5-7.5" stroke="currentColor" stroke-width="1.5"
                                      stroke-linecap="round" stroke-linejoin="round"></path>
                            </g>
                        </svg>
                    </button>
                    <div x-show="open" class="bg-dark-brand text-white rounded-md mt-2 w-full"
                         x-transition.origin.top.left>
                        {{ children }}
                        <a href="{{ url }}" class="uppercase block px-4 py-2 hover:bg-gray-800">{{ title }}</a>
                        {{ /children }}
                    </div>
                </div>
            {{ else }}
                <a href="{{ url }}" class="uppercase py-2 px-3 block hover:text-red-brand text-center">{{ title }}</a>
            {{ /if }}
        {{ /nav:main_mobile }}
    </div>
</nav>
